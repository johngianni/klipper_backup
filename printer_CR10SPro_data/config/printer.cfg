# This file contains common pin mappings for the BigTreeTech SKR PRO.
# To use this config, the firmware should be compiled for the
# STM32F407 with a "32KiB bootloader".

# The "make flash" command does not work on the SKR PRO. Instead,
# after running "make", copy the generated "out/klipper.bin" file to a
# file named "firmware.bin" on an SD card and then restart the SKR PRO
# with that SD card.

# See the example.cfg file for a description of available parameters.
#[include menu.cfg]
[include steppers.cfg]
#[include steppers08.cfg]
[include macros.cfg]
[include kiauh_macros.cfg]

[printer]
kinematics: cartesian
max_velocity: 500
max_accel: 2500
max_z_velocity: 50
max_z_accel: 70
#buffer_time_high: 10
#max_accel: 10000
#max_accel_to_decel: 10000

[exclude_object]

[safe_z_home]
#home_xy_position: 199,30
#home_xy_position: 199,152
home_xy_position: 194,123
speed: 100.0
z_hop: 10.0
z_hop_speed: 30.0

[bltouch]
sensor_pin: PH11
control_pin: PB11
#pin_up_reports_not_triggered: False
pin_up_touch_mode_reports_triggered: False
x_offset: -44.5
y_offset: 0
speed: 5
#z_offset = 1.87
samples: 2
sample_retract_dist: 5
samples_result: median
#test_sensor_pin: False
samples_tolerance: 0.05
samples_tolerance_retries: 2

[firmware_retraction]
retract_length: 1
retract_speed: 35   
#unretract_extra_length: 0.1
unretract_speed: 35

[mcu]
baud: 250000
restart_method: command
serial: /dev/serial/by-id/usb-Klipper_stm32f407xx_2C004F001551373431393537-if00
#serial: /dev/ttyACM1

#[mcu arduino]
#serial: /dev/serial/by-id/usb-1a86_USB_Serial-if00-port0

#[adxl345]
#axes_map: x,y,z
#cs_pin: arduino:PB2
#spi_software_sclk_pin: arduino:PB5
#spi_software_mosi_pin: arduino:PB3
#spi_software_miso_pin: arduino:PB4

#[resonance_tester]
#accel_chip: adxl345
#probe_points:
 #   150,150,20  # an example
    
[input_shaper]
shaper_freq_x: 47
shaper_type_x: ei
shaper_freq_y: 43
shaper_type_y: 2hump_ei

[screws_tilt_adjust]
screw1: 79,33
screw1_name: front left screw
screw2: 320,33
screw2_name: front right screw
screw3: 320,270
screw3_name: rear right screw
screw4: 79,270
screw4_name: rear left screw
horizontal_move_z: 10.0
speed: 100
screw_thread: CW-M3

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bltouch]
#*# z_offset = 1.196
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.107436, -0.115509, -0.119856, -0.122340, -0.131034, -0.137244, -0.165811, -0.199346, -0.213008, -0.255858, -0.329759
#*# 	  -0.119235, -0.116130, -0.129171, -0.114267, -0.124824, -0.131034, -0.161464, -0.172642, -0.192515, -0.215492, -0.282562
#*# 	  -0.119856, -0.114267, -0.063965, -0.072659, -0.098120, -0.122340, -0.132276, -0.154012, -0.159601, -0.180095, -0.222324
#*# 	  -0.112404, -0.096257, -0.076385, 0.000621, -0.072038, -0.079490, -0.075764, -0.106194, -0.124203, -0.131034, -0.182579
#*# 	  -0.101847, -0.097499, -0.057133, 0.054649, -0.021736, -0.055891, 0.000000, -0.073901, -0.085079, -0.104952, -0.141592
#*# 	  -0.099984, -0.091289, -0.063965, 0.020494, 0.029188, 0.109920, 0.003105, -0.041608, -0.057754, -0.072659, -0.098120
#*# 	  -0.110541, -0.106194, -0.063965, -0.114267, -0.015525, 0.055270, -0.006831, -0.022978, -0.036640, -0.016767, -0.055270
#*# 	  -0.123582, -0.111162, -0.091910, -0.080732, -0.049681, -0.026704, -0.022357, -0.004347, 0.001242, 0.019873, -0.010557
#*# 	  -0.152770, -0.127929, -0.107436, -0.088184, -0.061481, -0.033535, -0.022978, -0.004347, 0.021736, 0.035398, 0.024220
#*# 	  -0.181337, -0.142834, -0.127308, -0.103089, -0.067070, -0.042850, -0.022978, 0.000621, 0.027946, 0.060239, 0.045955
#*# 	  -0.204314, -0.150907, -0.116751, -0.090668, -0.040366, -0.011178, 0.007452, 0.036019, 0.061481, 0.063344, 0.080732
#*# x_count = 11
#*# y_count = 11
#*# mesh_x_pps = 3
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.1
#*# min_x = 40.0
#*# max_x = 300.0
#*# min_y = 27.0
#*# max_y = 300.00000000000006
