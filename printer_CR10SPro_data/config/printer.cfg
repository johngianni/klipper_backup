# This file contains common pin mappings for the BigTreeTech SKR PRO.
# To use this config, the firmware should be compiled for the
# STM32F407 with a "32KiB bootloader".

# The "make flash" command does not work on the SKR PRO. Instead,
# after running "make", copy the generated "out/klipper.bin" file to a
# file named "firmware.bin" on an SD card and then restart the SKR PRO
# with that SD card.

# See the example.cfg file for a description of available parameters.
#[include menu.cfg]
[include steppers.cfg]
#[include steppers08.cfg]
[include macros.cfg]
[include kiauh_macros.cfg]

[printer]
kinematics: cartesian
max_velocity: 500
max_accel: 2500
max_z_velocity: 50
max_z_accel: 70
#buffer_time_high: 10
#max_accel: 10000
#max_accel_to_decel: 10000

[exclude_object]

[safe_z_home]
#home_xy_position: 199,30
#home_xy_position: 199,152
home_xy_position: 110,123
speed: 100.0
z_hop: 10.0
z_hop_speed: 30.0

[bltouch]
sensor_pin: PH11
control_pin: PB11
#pin_up_reports_not_triggered: False
pin_up_touch_mode_reports_triggered: False
x_offset: 40
y_offset: 27
speed: 5
#z_offset = 1.87
samples: 2
sample_retract_dist: 5
samples_result: median
#test_sensor_pin: False
samples_tolerance: 0.05
samples_tolerance_retries: 2

[firmware_retraction]
retract_length: 1
retract_speed: 35   
#unretract_extra_length: 0.1
unretract_speed: 35

[mcu]
baud: 250000
restart_method: command
serial: /dev/serial/by-id/usb-Klipper_stm32f407xx_2C004F001551373431393537-if00
#serial: /dev/ttyACM1

#[mcu arduino]
#serial: /dev/serial/by-id/usb-1a86_USB_Serial-if00-port0

#[adxl345]
#axes_map: x,y,z
#cs_pin: arduino:PB2
#spi_software_sclk_pin: arduino:PB5
#spi_software_mosi_pin: arduino:PB3
#spi_software_miso_pin: arduino:PB4

#[resonance_tester]
#accel_chip: adxl345
#probe_points:
 #   150,150,20  # an example
    
[input_shaper]
shaper_freq_x: 47
shaper_type_x: ei
shaper_freq_y: 43
shaper_type_y: 2hump_ei

[screws_tilt_adjust]
screw1: 79,33
screw1_name: front left screw
screw2: 320,33
screw2_name: front right screw
screw3: 320,270
screw3_name: rear right screw
screw4: 79,270
screw4_name: rear left screw
horizontal_move_z: 10.0
speed: 100
screw_thread: CW-M3

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.148792, -0.143259, -0.132806, -0.131577, -0.129732, -0.142644, -0.167852, -0.198595, -0.227492, -0.257620, -0.335090
#*# 	-0.146333, -0.126043, -0.140799, -0.137725, -0.143259, -0.127273, -0.171541, -0.179534, -0.219499, -0.245323, -0.357839
#*# 	-0.126043, -0.114976, -0.087923, -0.095916, -0.110057, -0.125428, -0.161089, -0.176460, -0.179534, -0.223188, -0.301273
#*# 	-0.101449, -0.081774, -0.077470, -0.043039, -0.092227, -0.102064, -0.102064, -0.146333, -0.181994, -0.203513, -0.292666
#*# 	-0.083619, -0.075011, -0.057795, 0.015371, -0.028898, -0.100834, -0.081159, -0.143873, -0.169082, -0.202898, -0.288977
#*# 	-0.059640, -0.054106, -0.073166, -0.016601, -0.022749, 0.072552, -0.063944, -0.159245, -0.159245, -0.189987, -0.249012
#*# 	-0.059640, -0.067018, -0.061484, -0.063329, -0.051647, -0.019675, -0.065173, -0.121124, -0.136495, -0.161089, -0.244093
#*# 	-0.055951, -0.067633, -0.080545, -0.084234, -0.090997, -0.070707, -0.091612, -0.114976, -0.148792, -0.154326, -0.210277
#*# 	-0.079930, -0.077470, -0.083619, -0.092227, -0.103294, -0.108827, -0.119895, -0.136495, -0.146948, -0.158630, -0.203513
#*# 	-0.098375, -0.091612, -0.113131, -0.118665, -0.118050, -0.133421, -0.151252, -0.160474, -0.170312, -0.177690, -0.298199
#*# 	-0.117435, -0.090382, -0.093456, -0.104523, -0.095301, -0.103294, -0.130347, -0.148792, -0.165393, -0.187527, -0.421783
#*# x_count = 11
#*# y_count = 11
#*# mesh_x_pps = 3
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.1
#*# min_x = 40.0
#*# max_x = 300.0
#*# min_y = 27.0
#*# max_y = 300.00000000000006
#*#
#*# [bltouch]
#*# z_offset = 1.196
